import{S as Z,i as $,s as ee,k as d,q as j,a as w,l as p,m as E,r as z,h as v,c as U,n as t,b as te,H as s,a1 as N,T as V,C as X,Y as se,v as ae}from"../../../../chunks/index-42721989.js";function le(a,i,e){const u=new FileReader;u.readAsDataURL(a),u.onload=b=>{if(b.target!=null){const y=b.target.result;a.type.startsWith("image/")&&a.size<5*1024*1024||a.type.startsWith("video/")&&a.size<100*1024*1024?i(y,a.type):e("Please select a file with a valid type and size")}}}function ne(a){let i,e,u,b,y,f,n,x,m,A,D,T,c,S,I,B,R,l,h,P,o,C,_,F,L,O,q,W;return{c(){i=d("div"),e=d("form"),u=d("label"),b=j("Name"),y=w(),f=d("div"),n=d("input"),x=w(),m=d("label"),A=j("Description"),D=w(),T=d("div"),c=d("input"),S=w(),I=d("label"),B=j("Image"),R=w(),l=d("div"),h=d("input"),P=w(),o=d("input"),C=w(),_=d("input"),F=w(),L=d("button"),O=j("Add photo"),this.h()},l(g){i=p(g,"DIV",{class:!0});var k=E(i);e=p(k,"FORM",{action:!0,method:!0,class:!0});var r=E(e);u=p(r,"LABEL",{for:!0,class:!0});var H=E(u);b=z(H,"Name"),H.forEach(v),y=U(r),f=p(r,"DIV",{class:!0});var J=E(f);n=p(J,"INPUT",{type:!0,name:!0,id:!0,autocomplete:!0,class:!0}),J.forEach(v),x=U(r),m=p(r,"LABEL",{for:!0,class:!0});var M=E(m);A=z(M,"Description"),M.forEach(v),D=U(r),T=p(r,"DIV",{class:!0});var Y=E(T);c=p(Y,"INPUT",{type:!0,name:!0,id:!0,autocomplete:!0,class:!0}),Y.forEach(v),S=U(r),I=p(r,"LABEL",{for:!0,class:!0});var G=E(I);B=z(G,"Image"),G.forEach(v),R=U(r),l=p(r,"DIV",{class:!0});var K=E(l);h=p(K,"INPUT",{id:!0,type:!0,accept:!0}),K.forEach(v),P=U(r),o=p(r,"INPUT",{id:!0,name:!0,type:!0,class:!0}),C=U(r),_=p(r,"INPUT",{id:!0,name:!0,type:!0,class:!0}),F=U(r),L=p(r,"BUTTON",{type:!0,class:!0});var Q=E(L);O=z(Q,"Add photo"),Q.forEach(v),r.forEach(v),k.forEach(v),this.h()},h(){t(u,"for","name"),t(u,"class","block text-sm font-medium text-gray-700"),t(n,"type","text"),t(n,"name","title"),t(n,"id","title"),t(n,"autocomplete","title"),t(n,"class","block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black sm:text-sm"),t(f,"class","mt-1"),t(m,"for","description"),t(m,"class","block text-sm font-medium text-gray-700"),t(c,"type","text"),t(c,"name","description"),t(c,"id","description"),t(c,"autocomplete","name"),t(c,"class","block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black sm:text-sm"),t(T,"class","mt-1"),t(I,"for","image"),t(I,"class","block text-sm font-medium text-gray-700"),t(h,"id","image-to-upload"),t(h,"type","file"),t(h,"accept",".png,.jpg, .jpeg"),t(l,"class","mt-1"),t(o,"id","image"),t(o,"name","image"),t(o,"type","url"),t(o,"class","hidden"),t(_,"id","type"),t(_,"name","type"),t(_,"type","text"),t(_,"class","hidden"),t(L,"type","submit"),t(L,"class","text-md w-full items-center rounded-md border border-transparent bg-black px-4 py-2 font-bold text-white shadow-sm hover:bg-black focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2"),t(e,"action","?/create"),t(e,"method","post"),t(e,"class","flex w-full flex-col space-y-3"),t(i,"class","flex w-full flex-col")},m(g,k){te(g,i,k),s(i,e),s(e,u),s(u,b),s(e,y),s(e,f),s(f,n),N(n,a[0]),s(e,x),s(e,m),s(m,A),s(e,D),s(e,T),s(T,c),N(c,a[1]),s(e,S),s(e,I),s(I,B),s(e,R),s(e,l),s(l,h),a[10](h),s(e,P),s(e,o),N(o,a[2]),s(e,C),s(e,_),N(_,a[3]),s(e,F),s(e,L),s(L,O),q||(W=[V(n,"input",a[8]),V(c,"input",a[9]),V(h,"change",a[5]),V(o,"input",a[11]),V(_,"input",a[12])],q=!0)},p(g,[k]){k&1&&n.value!==g[0]&&N(n,g[0]),k&2&&c.value!==g[1]&&N(c,g[1]),k&4&&N(o,g[2]),k&8&&_.value!==g[3]&&N(_,g[3])},i:X,o:X,d(g){g&&v(i),a[10](null),q=!1,se(W)}}}function re(a){console.error("Error during image upload: ",a)}function oe(a,i,e){let{data:u}=i,b="",y="",f="",n="";const x={capture:()=>({title:b,description:y,image:f,fileType:n}),restore:l=>{e(0,b=l.title),e(1,y=l.description),e(2,f=l.image),e(3,n=l.fileType)}};let m;function A(){if(m.files!=null){const l=m.files[0];le(l,D,re)}}function D(l,h){console.log("Image Selected successfully: ",h,u),T(l,h)}const T=async(l,h)=>{const P=await fetch("/api/upload",{method:"PUT",body:JSON.stringify({image:l,fileType:h})}).then(o=>o.json()).then(o=>(console.log("res",o),o));e(2,f=P.url),e(3,n=P.fileType)};function c(){b=this.value,e(0,b)}function S(){y=this.value,e(1,y)}function I(l){ae[l?"unshift":"push"](()=>{m=l,e(4,m)})}function B(){f=this.value,e(2,f)}function R(){n=this.value,e(3,n)}return a.$$set=l=>{"data"in l&&e(6,u=l.data)},[b,y,f,n,m,A,u,x,c,S,I,B,R]}class ue extends Z{constructor(i){super(),$(this,i,oe,ne,ee,{data:6,snapshot:7})}get snapshot(){return this.$$.ctx[7]}}export{ue as default};
