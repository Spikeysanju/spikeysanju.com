import{S as ae,i as se,s as re,k as c,a as w,q as O,R as oe,l as d,h as f,c as T,m as I,r as z,n as e,D as a,b as ee,a1 as N,E as C,a2 as le,C as te,P as ne,w as ie}from"../chunks/index.8632a010.js";import{e as ue}from"../chunks/forms.402a0842.js";function ce(s,h,o){const i=new FileReader;i.readAsDataURL(s),i.onload=t=>{if(t.target!=null){const n=t.target.result;s.type.startsWith("image/")&&s.size<5*1024*1024||s.type.startsWith("video/")&&s.size<100*1024*1024?h(n,s.type):o("Please select a file with a valid type and size")}}}function de(s){let h,o,i,t,n,_,D,b,p,S,E,j,R,x,m,B,r,P,L,g,A,F,k,V,y,q,U,M,W,J;return{c(){h=c("meta"),o=w(),i=c("section"),t=c("form"),n=c("label"),_=O("Name"),D=w(),b=c("div"),p=c("input"),S=w(),E=c("label"),j=O("Description"),R=w(),x=c("div"),m=c("input"),B=w(),r=c("label"),P=O("Image"),L=w(),g=c("div"),A=c("input"),F=w(),k=c("input"),V=w(),y=c("input"),q=w(),U=c("button"),M=O("Add photo"),this.h()},l(u){const v=oe("svelte-xtpvnh",document.head);h=d(v,"META",{name:!0,content:!0}),v.forEach(f),o=T(u),i=d(u,"SECTION",{class:!0});var G=I(i);t=d(G,"FORM",{action:!0,method:!0,class:!0});var l=I(t);n=d(l,"LABEL",{for:!0,class:!0});var H=I(n);_=z(H,"Name"),H.forEach(f),D=T(l),b=d(l,"DIV",{class:!0});var K=I(b);p=d(K,"INPUT",{type:!0,name:!0,id:!0,autocomplete:!0,class:!0}),K.forEach(f),S=T(l),E=d(l,"LABEL",{for:!0,class:!0});var Q=I(E);j=z(Q,"Description"),Q.forEach(f),R=T(l),x=d(l,"DIV",{class:!0});var X=I(x);m=d(X,"INPUT",{type:!0,name:!0,id:!0,autocomplete:!0,class:!0}),X.forEach(f),B=T(l),r=d(l,"LABEL",{for:!0,class:!0});var Y=I(r);P=z(Y,"Image"),Y.forEach(f),L=T(l),g=d(l,"DIV",{class:!0});var Z=I(g);A=d(Z,"INPUT",{id:!0,type:!0,accept:!0}),Z.forEach(f),F=T(l),k=d(l,"INPUT",{id:!0,name:!0,type:!0,class:!0}),V=T(l),y=d(l,"INPUT",{id:!0,name:!0,type:!0,class:!0}),q=T(l),U=d(l,"BUTTON",{type:!0,class:!0});var $=I(U);M=z($,"Add photo"),$.forEach(f),l.forEach(f),G.forEach(f),this.h()},h(){document.title="Add Photo â€“ Spikey Sanju",e(h,"name","description"),e(h,"content","Add a new photo to the gallery"),e(n,"for","name"),e(n,"class","block text-sm font-medium text-gray-700 dark:text-gray-200"),e(p,"type","text"),e(p,"name","title"),e(p,"id","title"),e(p,"autocomplete","title"),e(p,"class","block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black dark:border-gray-500 dark:bg-purpleontop dark:focus:border-white sm:text-sm"),e(b,"class","mt-1"),e(E,"for","description"),e(E,"class","block text-sm font-medium text-gray-700 dark:text-gray-200"),e(m,"type","text"),e(m,"name","description"),e(m,"id","description"),e(m,"autocomplete","name"),e(m,"class","block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black dark:border-gray-500 dark:bg-purpleontop dark:focus:border-white sm:text-sm"),e(x,"class","mt-1"),e(r,"for","image"),e(r,"class","block text-sm font-medium text-gray-700 dark:text-gray-200"),e(A,"id","image-to-upload"),e(A,"type","file"),e(A,"accept",".png,.jpg, .jpeg"),e(g,"class","mt-1"),e(k,"id","image"),e(k,"name","image"),e(k,"type","url"),e(k,"class","hidden"),e(y,"id","type"),e(y,"name","type"),e(y,"type","text"),e(y,"class","hidden"),e(U,"type","submit"),e(U,"class","text-md w-full items-center rounded-md border border-transparent bg-black px-4 py-2 font-bold text-white shadow-sm hover:bg-black focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2 dark:bg-white dark:text-black"),e(t,"action","?/create"),e(t,"method","post"),e(t,"class","flex w-full flex-col space-y-3"),e(i,"class","flex min-h-screen w-full flex-col items-center justify-start")},m(u,v){a(document.head,h),ee(u,o,v),ee(u,i,v),a(i,t),a(t,n),a(n,_),a(t,D),a(t,b),a(b,p),N(p,s[0]),a(t,S),a(t,E),a(E,j),a(t,R),a(t,x),a(x,m),N(m,s[1]),a(t,B),a(t,r),a(r,P),a(t,L),a(t,g),a(g,A),s[9](A),a(t,F),a(t,k),N(k,s[2]),a(t,V),a(t,y),N(y,s[3]),a(t,q),a(t,U),a(U,M),W||(J=[C(p,"input",s[7]),C(m,"input",s[8]),C(A,"change",s[5]),C(k,"input",s[10]),C(y,"input",s[11]),le(ue.call(null,t))],W=!0)},p(u,[v]){v&1&&p.value!==u[0]&&N(p,u[0]),v&2&&m.value!==u[1]&&N(m,u[1]),v&4&&N(k,u[2]),v&8&&y.value!==u[3]&&N(y,u[3])},i:te,o:te,d(u){f(h),u&&f(o),u&&f(i),s[9](null),W=!1,ne(J)}}}function pe(s){console.error("Error during image upload: ",s)}function me(s,h,o){let i="",t="",n="",_="";const D={capture:()=>({title:i,description:t,image:n,fileType:_}),restore:r=>{o(0,i=r.title),o(1,t=r.description),o(2,n=r.image),o(3,_=r.fileType)}};let b;function p(){if(b.files!=null){const r=b.files[0];ce(r,S,pe)}}function S(r,P){E(r,P)}const E=async(r,P)=>{const L=await fetch("/api/upload",{method:"PUT",body:JSON.stringify({image:r,fileType:P})}).then(g=>g.json()).then(g=>(console.log("res",g),g));o(2,n=L.url),o(3,_=L.fileType)};function j(){i=this.value,o(0,i)}function R(){t=this.value,o(1,t)}function x(r){ie[r?"unshift":"push"](()=>{b=r,o(4,b)})}function m(){n=this.value,o(2,n)}function B(){_=this.value,o(3,_)}return[i,t,n,_,b,p,D,j,R,x,m,B]}class be extends ae{constructor(h){super(),se(this,h,me,de,re,{snapshot:6})}get snapshot(){return this.$$.ctx[6]}}export{be as default};
