import{S as se,i as ae,s as le,k as c,a as w,q as V,a3 as ne,l as d,h as f,c as I,m as T,r as z,n as e,D as s,b as ee,Z as N,O as R,C as te,U as oe,w as re}from"../chunks/index.e2d88345.js";function ie(a,h,n){const i=new FileReader;i.readAsDataURL(a),i.onload=t=>{if(t.target!=null){const r=t.target.result;a.type.startsWith("image/")&&a.size<5*1024*1024||a.type.startsWith("video/")&&a.size<100*1024*1024?h(r,a.type):n("Please select a file with a valid type and size")}}}function ue(a){let h,n,i,t,r,_,L,b,p,S,k,j,B,U,m,O,l,P,D,g,A,C,v,F,y,q,x,M,W,J;return{c(){h=c("meta"),n=w(),i=c("div"),t=c("form"),r=c("label"),_=V("Name"),L=w(),b=c("div"),p=c("input"),S=w(),k=c("label"),j=V("Description"),B=w(),U=c("div"),m=c("input"),O=w(),l=c("label"),P=V("Image"),D=w(),g=c("div"),A=c("input"),C=w(),v=c("input"),F=w(),y=c("input"),q=w(),x=c("button"),M=V("Add photo"),this.h()},l(u){const E=ne("svelte-xtpvnh",document.head);h=d(E,"META",{name:!0,content:!0}),E.forEach(f),n=I(u),i=d(u,"DIV",{class:!0});var Z=T(i);t=d(Z,"FORM",{action:!0,method:!0,class:!0});var o=T(t);r=d(o,"LABEL",{for:!0,class:!0});var G=T(r);_=z(G,"Name"),G.forEach(f),L=I(o),b=d(o,"DIV",{class:!0});var H=T(b);p=d(H,"INPUT",{type:!0,name:!0,id:!0,autocomplete:!0,class:!0}),H.forEach(f),S=I(o),k=d(o,"LABEL",{for:!0,class:!0});var K=T(k);j=z(K,"Description"),K.forEach(f),B=I(o),U=d(o,"DIV",{class:!0});var Q=T(U);m=d(Q,"INPUT",{type:!0,name:!0,id:!0,autocomplete:!0,class:!0}),Q.forEach(f),O=I(o),l=d(o,"LABEL",{for:!0,class:!0});var X=T(l);P=z(X,"Image"),X.forEach(f),D=I(o),g=d(o,"DIV",{class:!0});var Y=T(g);A=d(Y,"INPUT",{id:!0,type:!0,accept:!0}),Y.forEach(f),C=I(o),v=d(o,"INPUT",{id:!0,name:!0,type:!0,class:!0}),F=I(o),y=d(o,"INPUT",{id:!0,name:!0,type:!0,class:!0}),q=I(o),x=d(o,"BUTTON",{type:!0,class:!0});var $=T(x);M=z($,"Add photo"),$.forEach(f),o.forEach(f),Z.forEach(f),this.h()},h(){document.title="Add Photo â€“ Spikey Sanju",e(h,"name","description"),e(h,"content","Add a new photo to the gallery"),e(r,"for","name"),e(r,"class","block text-sm font-medium text-gray-700"),e(p,"type","text"),e(p,"name","title"),e(p,"id","title"),e(p,"autocomplete","title"),e(p,"class","block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black sm:text-sm"),e(b,"class","mt-1"),e(k,"for","description"),e(k,"class","block text-sm font-medium text-gray-700"),e(m,"type","text"),e(m,"name","description"),e(m,"id","description"),e(m,"autocomplete","name"),e(m,"class","block w-full rounded-md border-gray-300 shadow-sm focus:border-black focus:ring-black sm:text-sm"),e(U,"class","mt-1"),e(l,"for","image"),e(l,"class","block text-sm font-medium text-gray-700"),e(A,"id","image-to-upload"),e(A,"type","file"),e(A,"accept",".png,.jpg, .jpeg"),e(g,"class","mt-1"),e(v,"id","image"),e(v,"name","image"),e(v,"type","url"),e(v,"class","hidden"),e(y,"id","type"),e(y,"name","type"),e(y,"type","text"),e(y,"class","hidden"),e(x,"type","submit"),e(x,"class","text-md w-full items-center rounded-md border border-transparent bg-black px-4 py-2 font-bold text-white shadow-sm hover:bg-black focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2"),e(t,"action","?/create"),e(t,"method","post"),e(t,"class","flex w-full flex-col space-y-3"),e(i,"class","flex w-full flex-col")},m(u,E){s(document.head,h),ee(u,n,E),ee(u,i,E),s(i,t),s(t,r),s(r,_),s(t,L),s(t,b),s(b,p),N(p,a[0]),s(t,S),s(t,k),s(k,j),s(t,B),s(t,U),s(U,m),N(m,a[1]),s(t,O),s(t,l),s(l,P),s(t,D),s(t,g),s(g,A),a[9](A),s(t,C),s(t,v),N(v,a[2]),s(t,F),s(t,y),N(y,a[3]),s(t,q),s(t,x),s(x,M),W||(J=[R(p,"input",a[7]),R(m,"input",a[8]),R(A,"change",a[5]),R(v,"input",a[10]),R(y,"input",a[11])],W=!0)},p(u,[E]){E&1&&p.value!==u[0]&&N(p,u[0]),E&2&&m.value!==u[1]&&N(m,u[1]),E&4&&N(v,u[2]),E&8&&y.value!==u[3]&&N(y,u[3])},i:te,o:te,d(u){f(h),u&&f(n),u&&f(i),a[9](null),W=!1,oe(J)}}}function ce(a){console.error("Error during image upload: ",a)}function de(a,h,n){let i="",t="",r="",_="";const L={capture:()=>({title:i,description:t,image:r,fileType:_}),restore:l=>{n(0,i=l.title),n(1,t=l.description),n(2,r=l.image),n(3,_=l.fileType)}};let b;function p(){if(b.files!=null){const l=b.files[0];ie(l,S,ce)}}function S(l,P){k(l,P)}const k=async(l,P)=>{const D=await fetch("/api/upload",{method:"PUT",body:JSON.stringify({image:l,fileType:P})}).then(g=>g.json()).then(g=>(console.log("res",g),g));n(2,r=D.url),n(3,_=D.fileType)};function j(){i=this.value,n(0,i)}function B(){t=this.value,n(1,t)}function U(l){re[l?"unshift":"push"](()=>{b=l,n(4,b)})}function m(){r=this.value,n(2,r)}function O(){_=this.value,n(3,_)}return[i,t,r,_,b,p,L,j,B,U,m,O]}class me extends se{constructor(h){super(),ae(this,h,de,ue,le,{snapshot:6})}get snapshot(){return this.$$.ctx[6]}}export{me as default};
